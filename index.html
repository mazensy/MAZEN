<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MAZEN — خدمات السوشيال ميديا</title>
<style>
  :root{
    --bg:#071022;          /* page background */
    --card:#071622;
    --muted:#9aa6b2;
    --accent1:#2B6CB0;     /* electric blue */
    --accent2:#6B46C1;     /* purple */
    --accent-grad: linear-gradient(90deg,var(--accent1),var(--accent2));
    --glass: rgba(255,255,255,0.04);
    --accent-cta: #FFD166;
    --success: #25D366;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Tajawal",system-ui,Segoe UI,Roboto,Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(43,108,176,0.06), transparent),
                radial-gradient(1000px 400px at 90% 90%, rgba(107,70,193,0.04), transparent),
                var(--bg);
    color:#e6eefb;
  }
  header{
    display:flex;align-items:center;gap:16px;padding:18px 20px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border-bottom:1px solid rgba(255,255,255,0.03);
    position:sticky;top:0;z-index:90;
  }
  .logo{display:flex;align-items:center;gap:12px}
  .logo .symbol{
    width:52px;height:52px;border-radius:10px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;font-weight:800;color:#fff;font-size:22px;
    box-shadow:0 6px 20px rgba(43,108,176,0.18), 0 2px 6px rgba(11,22,40,0.6);
  }
  header .brand {font-size:18px;font-weight:700}
  header .tag {font-size:12px;color:var(--muted)}
  .container{max-width:1150px;margin:20px auto;padding:0 18px}
  .hero{display:flex;justify-content:space-between;gap:16px;align-items:center;flex-wrap:wrap}
  .hero .left h1{margin:0;font-size:22px}
  .hero .left p{margin:6px 0 0 0;color:var(--muted);font-size:13px}

  /* controls */
  .controls{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
  input[type="text"], input[type="number"], select {
    width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);
    background:transparent;color:inherit;font-size:14px;
  }
  button.btn{background:var(--accent1);border:none;color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer}
  button.btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}
  .grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}
  @media(max-width:980px){ .grid{grid-template-columns:1fr} .aside{order:2} }
  .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
  .service-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
                border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.03);}
  .service-card h4{margin:0 0 8px 0}
  .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .badge{background:var(--glass);padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}
  .price{font-weight:700;color:var(--accent-cta);font-size:18px}
  .price small{display:block;color:var(--muted);font-weight:400;font-size:12px}
  .actions{display:flex;gap:8px;margin-top:10px}
  .wa-btn{background:var(--success);color:#012; padding:9px;border-radius:8px;text-decoration:none;font-weight:700;display:inline-block}
  .details-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px;border-radius:8px}

  .filters-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .tabs{display:flex;gap:8px;margin-top:18px;flex-wrap:wrap}
  .tab{padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);cursor:pointer;color:var(--muted)}
  .tab.active{background:var(--accent-grad);color:#fff;box-shadow:0 8px 24px rgba(43,108,176,0.12)}

  .aside .card{position:sticky;top:86px}
  footer{margin:28px 0;text-align:center;color:var(--muted);font-size:13px}
  .small{font-size:12px;color:var(--muted)}
  /* responsive tweaks */
  @media(max-width:600px){
    .hero .left h1{font-size:18px}
    .controls{flex-direction:column}
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="symbol">M</div>
    <div>
      <div class="brand">MAZEN</div>
      <div class="tag">خدمات تسويق رقمي — صفحة الطلب عبر واتساب</div>
    </div>
  </div>
  <div style="margin-left:auto;text-align:left">
    <div class="small">تواصل واتساب: <strong>+963 980 962 294</strong></div>
  </div>
</header>

<div class="container">
  <div class="hero">
    <div class="left">
      <h1>خدمات السوشيال — MAZEN (نسخة داكنة)</h1>
      <p>صفحة منظمة للأقسام — فيسبوك، إنستغرام، تيك توك، يوتيوب. عدّل الخدمات عبر ملف <code>services.json</code>.</p>
    </div>

    <div style="min-width:260px">
      <div class="card small">
        <div>سعر الصرف (USD → SYP)</div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <input type="number" id="usdRate" value="11060" />
          <button class="btn" id="updateRate">تحديث</button>
        </div>
      </div>
    </div>
  </div>

  <div class="controls">
    <div class="card" style="min-width:300px">
      <label class="small">بحث</label>
      <input type="text" id="searchInput" placeholder="ابحث بعنوان الخدمة أو الوصف أو الفئة" />
    </div>

    <div class="card" style="width:170px">
      <label class="small">اللغة</label>
      <select id="langFilter">
        <option value="all">الكل</option>
        <option value="arabic">عربي</option>
        <option value="foreign">أجنبي</option>
      </select>
    </div>

    <div class="card" style="width:220px">
      <label class="small">نطاق السعر (بالليرة السورية)</label>
      <div style="display:flex;gap:8px">
        <input type="number" id="minSYP" placeholder="أدنى" />
        <input type="number" id="maxSYP" placeholder="أعلى" />
      </div>
    </div>

    <div style="display:flex;gap:8px;align-items:center">
      <button class="btn" id="applyBtn">تطبيق</button>
      <button class="btn secondary" id="resetBtn">إعادة</button>
    </div>
  </div>

  <div class="tabs" id="categoryTabs">
    <!-- تبويبات الأقسام تُولّد ديناميكيا -->
  </div>

  <div class="grid">
    <main>
      <div id="servicesContainer" class="cards">
        <!-- بطاقات الخدمات -->
      </div>
    </main>

    <aside class="aside">
      <div class="card">
        <h4>معلومات سريعة</h4>
        <p class="small">قم بتحرير ملف <code>services.json</code> لإضافة أو تعديل الخدمات. كل خدمة تحتوي على: id, category, title, desc, price_usd, language, notes (اختياري).</p>
        <p class="small">عند الضغط على "شراء" يفتح واتساب برقمك مع رسالة تلقائية لتأكيد الطلب.</p>
      </div>

      <div style="height:12px"></div>

      <div class="card">
        <h4>أدوات</h4>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="pill btn secondary" id="exportBtn">تصدير JSON</button>
          <button class="pill btn" id="importBtn">استيراد JSON</button>
          <input type="file" id="fileInput" accept=".json" style="display:none" />
        </div>
        <div style="margin-top:12px" class="small">فرّز حسب:</div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="pill" onclick="sortBy('price_asc')">الأرخص</button>
          <button class="pill" onclick="sortBy('price_desc')">الأغلى</button>
          <button class="pill" onclick="sortBy('title')">الاسم</button>
        </div>
      </div>
    </aside>
  </div>

  <footer>© MAZEN — صفحة خدمات. تواصل: +963980962294</footer>
</div>

<script>
/* ====== تهيئة البيانات ======
   - يحاول تحميل services.json من نفس المسار
   - إن لم يتوفر، يستخدم بيانات افتراضية (فارغة)
   - أنت تعدّل services.json لوضع خدمات الزبون الحقيقية
*/
let USD_TO_SYP = Number(document.getElementById('usdRate').value) || 11060;
const WA_NUMBER = '963980962294'; // رقم الواتساب (بدون +) — كما طلبت

document.getElementById('updateRate').addEventListener('click', () => {
  USD_TO_SYP = Number(document.getElementById('usdRate').value) || USD_TO_SYP;
  renderList(currentList);
});

/* تحميل ملف services.json */
let services = [];
let categories = [];
let currentList = [];

async function loadServices(){
  try{
    const r = await fetch('services.json', {cache: "no-store"});
    if(!r.ok) throw new Error('not found');
    services = await r.json();
    console.log('loaded services.json', services.length);
  }catch(err){
    // ملف غير موجود — نضع مصفوفة افتراضية خفيفة
    services = [
      {id:'fb_ar_1', category:'facebook', title:'خدمة ترويج صفحة (عربي)', desc:'وصف عام للخدمة (ضع وصفك في services.json)', price_usd:1.5, language:'arabic', notes:''},
      {id:'ig_en_1', category:'instagram', title:'Boost Visibility (foreign)', desc:'وصف عام للخدمة (ضع وصفك في services.json)', price_usd:1.4, language:'foreign', notes:''}
    ];
    console.warn('services.json لم يُعثر عليه. تم تحميل بيانات افتراضية صغيرة.');
  }
  // بناء القوائم
  categories = Array.from(new Set(services.map(s=>s.category)));
  if(!categories.includes('all')) categories.unshift('all');
  buildCategoryTabs();
  resetFiltersAndRender();
}

/* بناء تبويبات الأقسام */
function buildCategoryTabs(){
  const tabs = document.getElementById('categoryTabs');
  tabs.innerHTML = '';
  categories.forEach(cat=>{
    const b = document.createElement('button');
    b.className = 'tab' + (cat==='all' ? ' active' : '');
    b.dataset.cat = cat;
    b.textContent = cat === 'all' ? 'الكل' : capitalize(cat);
    b.addEventListener('click', (e)=>{
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      b.classList.add('active');
      applyFilters();
    });
    tabs.appendChild(b);
  });
}

/* render */
const container = document.getElementById('servicesContainer');
function usdToSyp(u){ return Math.round(u * USD_TO_SYP); }

function renderList(list){
  currentList = list.slice();
  container.innerHTML = '';
  if(list.length === 0){
    container.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:var(--muted)">لا توجد خدمات مطابقة</div>';
    return;
  }
  list.forEach(s=>{
    const el = document.createElement('div');
    el.className = 'service-card';
    el.innerHTML = `
      <div style="display:flex;justify-content:space-between;gap:12px">
        <div style="flex:1">
          <h4>${escapeHtml(s.title)}</h4>
          <div class="meta">${escapeHtml(s.desc || '')}</div>
          <div class="badges">
            <div class="badge">${escapeHtml(s.category)}</div>
            <div class="badge">${s.language === 'arabic' ? 'عربي' : 'أجنبي'}</div>
            ${s.notes ? `<div class="badge">${escapeHtml(s.notes)}</div>` : ''}
          </div>
        </div>
        <div style="width:170px;text-align:left">
          <div class="price">${Number(s.price_usd).toFixed(3)} $</div>
          <div class="meta">${usdToSyp(Number(s.price_usd)).toLocaleString()} ل.س</div>
          <div class="actions">
            <a href="#" class="wa-btn" onclick="openWhatsApp(event,'${s.id}')">شراء عبر واتساب</a>
            <button class="details-btn" onclick="showDetails('${s.id}')">تفاصيل</button>
          </div>
        </div>
      </div>
    `;
    container.appendChild(el);
  });
}

/* فلترة وبحث */
function applyFilters(){
  const q = document.getElementById('searchInput').value.trim().toLowerCase();
  const lang = document.getElementById('langFilter').value;
  const min = Number(document.getElementById('minSYP').value) || null;
  const max = Number(document.getElementById('maxSYP').value) || null;
  const activeTab = document.querySelector('.tab.active').dataset.cat;

  let list = services.slice();

  if(activeTab && activeTab !== 'all') list = list.filter(s => s.category === activeTab);

  if(lang !== 'all') list = list.filter(s => s.language === (lang === 'arabic' ? 'arabic' : 'foreign'));

  if(q){
    list = list.filter(s => (s.title + ' ' + (s.desc||'') + ' ' + (s.notes||'')).toLowerCase().includes(q));
  }

  if(min !== null){
    list = list.filter(s => usdToSyp(Number(s.price_usd)) >= min);
  }
  if(max !== null){
    list = list.filter(s => usdToSyp(Number(s.price_usd)) <= max);
  }

  renderList(list);
}

/* إعادة */
function resetFiltersAndRender(){
  document.getElementById('searchInput').value = '';
  document.getElementById('langFilter').value = 'all';
  document.getElementById('minSYP').value = '';
  document.getElementById('maxSYP').value = '';
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelector('.tab').classList.add('active'); // الاول 'all'
  renderList(services);
}

/* فرز */
function sortBy(mode){
  if(mode === 'price_asc') services.sort((a,b)=>a.price_usd - b.price_usd);
  else if(mode === 'price_desc') services.sort((a,b)=>b.price_usd - a.price_usd);
  else if(mode === 'title') services.sort((a,b)=>a.title.localeCompare(b.title,'ar'));
  applyFilters();
}

/* فتح واتساب مع رسالة مُشكّلة */
function openWhatsApp(ev, serviceId){
  ev.preventDefault();
  const s = services.find(x=>x.id === serviceId);
  if(!s) return;
  const usd = Number(s.price_usd).toFixed(3);
  const syp = usdToSyp(Number(s.price_usd)).toLocaleString();
  const message = `مرحبًا MAZEN، أريد طلب الخدمة:%0A- ${encodeURIComponent(s.title)}%0A- الوصف: ${encodeURIComponent(s.desc||'')}%0A- السعر: ${syp} ل.س (≈ ${usd} USD)%0A%0Aالرجاء تزويدي بتفاصيل الدفع والتنفيذ.`;
  const url = `https://wa.me/${WA_NUMBER}?text=${message}`;
  window.open(url, '_blank', 'noopener');
}

/* تفاصيل سريعة (نموذجي — يمكن توسيعه) */
function showDetails(id){
  const s = services.find(x=>x.id===id);
  if(!s) return alert('لا توجد تفاصيل إضافية');
  alert(`${s.title}\n\n${s.desc || ''}\n\nالسعر: ${s.price_usd} USD ≈ ${usdToSyp(Number(s.price_usd)).toLocaleString()} ل.س\nاللغة: ${s.language}`);
}

/* استيراد/تصدير JSON */
document.getElementById('exportBtn').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(services, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'services-export.json'; a.click();
  URL.revokeObjectURL(url);
});

document.getElementById('importBtn').addEventListener('click', ()=> document.getElementById('fileInput').click());
document.getElementById('fileInput').addEventListener('change', (e)=>{
  const f = e.target.files[0]; if(!f) return;
  const reader = new FileReader();
  reader.onload = () => {
    try{
      const data = JSON.parse(reader.result);
      if(!Array.isArray(data)) throw 'invalid';
      services = data;
      buildCategoryTabs();
      resetFiltersAndRender();
      alert('تم استيراد الخدمات بنجاح');
    }catch(err){
      alert('ملف غير صالح: تأكد أنه JSON لمصفوفة خدمات');
    }
  };
  reader.readAsText(f);
});

/* مساعدة */
function escapeHtml(str){ return String(str||'').replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s])); }

/* بحث Enter */
document.getElementById('searchInput').addEventListener('keydown', e=>{ if(e.key === 'Enter') applyFilters(); });
document.getElementById('applyBtn').addEventListener('click', applyFilters);
document.getElementById('resetBtn').addEventListener('click', resetFiltersAndRender);

/* تحميل أولي */
loadServices();

</script>
</body>
          </html>
