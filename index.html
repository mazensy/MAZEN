<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MAZEN â€” Premium Social Services</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#05050b;
  --panel:#0b1220;
  --muted:#98a6bf;
  --text:#eaf3ff;
  --accent1:#2b82ff;
  --accent2:#7a3cff;
  --accent-cta:#ffd166;
  --glass: rgba(255,255,255,0.03);
  --card-glow: 0 10px 40px rgba(58,88,255,0.12);
  --neon: 0 6px 20px rgba(123,60,255,0.12);
  --shadow: rgba(2,6,23,0.6);
}
/* Basic reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:"Tajawal",sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  background:
    radial-gradient(800px 400px at 8% 12%, rgba(43,130,255,0.03), transparent),
    radial-gradient(600px 300px at 92% 88%, rgba(122,60,255,0.02), transparent),
    var(--bg);
  color:var(--text); overflow-x:hidden;
}  /* ===== Header (glass + dynamic blur) ===== */
.header{
position:sticky; top:0; z-index:1000;
display:flex; align-items:center; justify-content:space-between;
gap:12px; padding:14px 18px;
backdrop-filter: blur(6px);
background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
border-bottom: 1px solid rgba(255,255,255,0.03);
transition:backdrop-filter .28s ease, background .28s ease;
}
.header.scrolled{ backdrop-filter: blur(10px); background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); }

/* logo */
.logo{display:flex; align-items:center; gap:12px}
.sym{width:54px; height:54px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:900; font-size:22px; color:#fff; background:linear-gradient(135deg,var(--accent1),var(--accent2)); box-shadow:var(--card-glow)}
.brand{font-weight:900}
.tag{color:var(--muted); font-size:13px}

/* container */
.container{max-width:1180px; margin:20px auto; padding:0 18px}

/* hero / intro */
.hero{display:flex; justify-content:space-between; gap:14px; align-items:center; flex-wrap:wrap; margin-bottom:10px}
.hero h1{margin:0; font-size:22px}
.hero p{margin:6px 0 0 0; color:var(--muted); font-size:13px}

/* top offers bar */
.top-offer{display:flex; gap:10px; align-items:center; padding:10px 14px; border-radius:10px; background: linear-gradient(90deg,#ffd16611,#7a3cff11); border:1px solid rgba(255,255,255,0.02); color:var(--text); margin-bottom:12px; font-weight:700}
.top-offer small{color:var(--muted); font-weight:600}

/* layout controls */
.controls{display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px}

/* category bar (tabs) */
.category-bar{display:flex; gap:8px; flex-wrap:wrap}
.cat-btn{
display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:12px; cursor:pointer; border:1px solid rgba(255,255,255,0.03);
background:transparent; color:var(--muted); font-weight:800; transition:transform .18s ease, box-shadow .18s ease;
}
.cat-btn svg{filter:drop-shadow(0 6px 20px rgba(0,0,0,0.5))}
.cat-btn.active{ background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#fff; box-shadow: var(--neon); transform:translateY(-3px) }

/* language filter */
.lang-filter{display:flex; gap:8px; align-items:center}
.lang-btn{padding:8px 12px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); font-weight:700; cursor:pointer}
.lang-btn.active{background:var(--accent1); color:#fff; border:none; box-shadow:0 8px 30px rgba(43,130,255,0.08)}

/* search / actions */
.actions-right{margin-left:auto; display:flex; gap:8px; align-items:center}

/* cards grid */
.cards{
display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:18px; margin-top:6px;
}

/* card style (glass + gradient border + 3D tilt) */
.card{
background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
border-radius:14px; padding:14px; border:1px solid rgba(255,255,255,0.03);
transition: transform .25s cubic-bezier(.2,.9,.25,1), box-shadow .25s ease;
transform-style:preserve-3d;
--tiltX:0deg; --tiltY:0deg;
will-change:transform;
position:relative; overflow:visible;
}
.card::after{
content:""; position:absolute; inset:-1px; border-radius:15px; pointer-events:none;
background:linear-gradient(90deg, transparent, rgba(123,60,255,0.06), transparent);
opacity:0; transition:opacity .25s ease;
}
.card:hover{ transform: translateY(-10px) rotateX(var(--tiltX)) rotateY(var(--tiltY)); box-shadow: 0 30px 70px rgba(4,8,20,0.6); }
.card:hover::after{ opacity:1 }

/* card inner */
.card .left{display:flex; gap:12px; align-items:flex-start}
.icon-wrap{width:46px;height:46px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.02); flex-shrink:0}
.card h3{margin:0 0 6px; font-size:16px}
.card .desc{color:var(--muted); font-size:13px}
.badges{display:flex; gap:8px; margin-top:8px; flex-wrap:wrap}
.badge{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.02); color:var(--muted); font-size:12px; border:1px solid rgba(255,255,255,0.02)}
.price{font-weight:800; color:var(--accent-cta); margin-top:10px; font-size:18px}

/* actions column */
.actions{display:flex; flex-direction:column; align-items:flex-end; gap:8px; min-width:150px}
.btn{
padding:9px 12px; border-radius:10px; cursor:pointer; font-weight:800; text-decoration:none; border: none;
}
.btn-wa{background:#25D366; color:#032}
.btn-details{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04)}

/* old modal (kept, but hidden/unused) */
#orderModal_old{display:none}

/* ========== NEW MODAL STYLES ========== */

/* modal background */
.modal-bg{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2200;
  background:rgba(2,6,23,0.55);
  backdrop-filter:blur(8px);
}

/* modal card */
.modal-card{
  width:94%; max-width:520px;
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  border-radius:16px;
  padding:20px;
  border:1px solid rgba(255,255,255,0.12);
  box-shadow:0 30px 80px rgba(0,0,0,0.6);
  position:relative;
  animation:slideUp .28s ease both;
}

/* close */
.modal-close{
  position:absolute; top:12px; left:12px;
  width:40px; height:40px; border-radius:50%;
  border:none; background:rgba(255,255,255,0.08); color:#fff; font-size:22px; cursor:pointer;
}

/* neon effect */
.neon{
  box-shadow: 0 0 12px rgba(0,213,255,0.14), 0 0 28px rgba(123,60,255,0.06);
  border:1px solid rgba(0,213,255,0.18);
}

/* inputs inside modal */
.modal-card input, .modal-card select{
  width:100%; padding:12px; border-radius:10px; margin-top:6px; border:none;
  background:rgba(0,0,0,0.45); color:var(--text);
}

/* price box */
.price-box{
  padding:12px; border-radius:10px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.10); margin-top:8px; font-weight:700;
}

/* confirm overlay */
.confirm-box{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:2600; background:rgba(0,0,0,0.65); backdrop-filter:blur(6px)}
.confirm-card{width:90%;max-width:420px;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.12); text-align:right}

/* status */
.status-box{margin-top:12px;padding:10px;border-radius:10px;background:rgba(255,255,0,0.12);border:1px solid rgba(255,255,0,0.28);text-align:center}

/* responsive */
@media (max-width:820px){
.actions{min-width:110px}
}

/* tiny utility */
.small{font-size:12px;color:var(--muted)}
</style>

</head>
<body>
<!-- custom cursor -->
<div id="cursorFollow" class="cursor-follow" style="background:linear-gradient(90deg,var(--accent1),var(--accent2));"></div>
<header class="header" id="siteHeader">
  <div style="display:flex;align-items:center;gap:12px">
    <div class="sym">M</div>
    <div>
      <div class="brand">MAZEN</div>
      <div class="tag small">Ø®Ø¯Ù…Ø§Øª Ø³ÙˆØ´ÙŠØ§Ù„ â€” Premium</div>
    </div>
  </div>
  <div style="display:flex;align-items:center;gap:10px">
    <div class="small">ÙˆØ§ØªØ³Ø§Ø¨: <strong>+963 980 962 294</strong></div>
    <button id="themeToggle" class="btn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)">â˜€ï¸</button>
  </div>
</header>
<main class="container">
  <section class="hero">
    <div>
      <h1>MAZEN â€” Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ (Premium)</h1>
      <p class="small">ÙˆØ§Ø¬Ù‡Ø© Ø¯Ø§ÙƒÙ†Ø© ÙØ§Ø®Ø±Ø© â€” ØªØ­ÙƒÙ… Ø¨ÙƒÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ù…Ø¤Ø«Ø±Ø§Øª. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø®Ø¯Ù…Ø© Ù„Ø·Ù„Ø¨Ù‡Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.</p>
    </div>
    <div class="top-offer">
      <svg width="20" height="20" viewBox="0 0 24 24" style="filter:drop-shadow(0 6px 20px rgba(0,0,0,0.4))"><path d="M12 2l2.6 6.9L21 9.2l-5 3.7L17 20l-5-3.3L7 20l1-7.1-5-3.7 6.4-0.3L12 2z" fill="#ffd166"/></svg>
      <div style="line-height:1">
        <div>Ø¹Ø±ÙˆØ¶ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø³Ù†Ø©</div>
        <small>Ø®ØµÙˆÙ…Ø§Øª Ø¹Ù„Ù‰ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† â€” Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</small>
      </div>
    </div>
  </section>

  <div class="controls">
    <div class="category-bar" id="categoryBar" role="tablist" aria-label="Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„"></div>
    <div class="lang-filter" style="margin-left:auto">
      <button id="lg_all" class="lang-btn active" onclick="setLang('all')">Ø§Ù„ÙƒÙ„</button>
      <button id="lg_ar" class="lang-btn" onclick="setLang('arabic')">Ø¹Ø±Ø¨ÙŠ</button>
      <button id="lg_en" class="lang-btn" onclick="setLang('foreign')">Ø£Ø¬Ù†Ø¨ÙŠ</button>
    </div>
  </div>

  <!-- skeleton loader -->
  <div id="skeletonArea" class="skeleton-grid" aria-hidden="false">
    <div class="skel"></div><div class="skel"></div><div class="skel"></div><div class="skel"></div>
  </div>

  <!-- services -->
  <div id="servicesContainer" class="cards" aria-live="polite" style="display:none"></div>

  <footer class="footer">
    Â© MAZEN â€” ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” ØªÙˆØ§ØµÙ„: +963980962294 â€” <a href="#" style="color:var(--muted);text-decoration:none">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
  </footer>
</main>

<!-- =========================
     NEW MODAL (replaces old modal)
     ========================= -->
<div id="orderModal" class="modal-bg" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true">
    <button class="modal-close" onclick="closeOrder()">Ã—</button>

    <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
      <div id="modalPlatformIcon" style="width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05)"></div>
      <div>
        <h3 id="modalTitle" style="margin:0">Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©</h3>
        <div id="modalService" class="small" style="color:var(--muted)"></div>
      </div>
    </div>

    <label class="small">Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨ / Ø§Ù„Ù…Ù†Ø´ÙˆØ±</label>
    <input id="orderLinkAuto" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨" />

    <label class="small" style="margin-top:12px">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
    <input id="orderQty" type="number" placeholder="Ù…Ø«Ø§Ù„: 1500" oninput="updateAutoPrice()" />

    <label class="small" style="margin-top:12px">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒÙ„ÙŠ</label>
    <div id="autoPriceBox" class="price-box">0 USD</div>

    <label class="small" style="margin-top:12px">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
    <select id="paymentMethodAuto" style="margin-top:6px">
      <option value="syr">Ø³ÙŠØ±ÙŠØªÙ„ ÙƒØ§Ø´</option>
      <option value="sham">Ø´Ø§Ù… ÙƒØ§Ø´</option>
    </select>

    <label class="small" style="margin-top:12px">ÙƒÙˆØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­ÙˆÙŠÙ„</label>
    <input id="transferCodeAuto" placeholder="Ù…Ø«Ø§Ù„: 123456" style="margin-top:6px" />

    <div style="margin-top:16px;display:flex;gap:10px">
      <button onclick="confirmAndSend()" class="btn" style="flex:1;background:linear-gradient(135deg,#3b82f6,#2563eb);box-shadow:0 0 18px rgba(59,130,246,0.25)">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
      <button onclick="closeOrder()" class="btn" style="flex:0.6;background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)">Ø¥Ù„ØºØ§Ø¡</button>
    </div>

  </div>
</div>

<!-- confirmation overlay -->
<div id="confirmBox" class="confirm-box" aria-hidden="true">
  <div class="confirm-card" id="confirmCard"></div>
</div>

<!-- confirmation sound -->
<audio id="successSound" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-confirmation-tone-2861.mp3" type="audio/mpeg">
</audio>

<!-- canvases for effects -->
<canvas id="particleCanvas" style="position:fixed;inset:0;pointer-events:none;z-index:5"></canvas>
<canvas id="snowCanvas" style="position:fixed;inset:0;pointer-events:none;z-index:6"></canvas>

<script>
/* ==================== CONFIG & DATA ==================== */
/* TOGGLE EFFECTS HERE */
const EFFECTS = {
  snow: true,
  particles: true,
  cursorGlow: true,
  tilt: true,
  neonLines: true
};

/* WhatsApp */
const WA_NUMBER = '963980962294';

/* Services data (sample; extend as needed) */
const SERVICES = [
  {id:'fb_ar_1', platform:'facebook', title:'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ÙÙŠØ³Ø¨ÙˆÙƒ â€” Ø¹Ø±Ø¨ÙŠ', desc:'Ø­Ø³Ø§Ø¨Ø§Øª Ø¹Ø±Ø¨ÙŠØ© Ù†Ø´Ø·Ø© â€¢ Ø¶Ù…Ø§Ù† 30 ÙŠÙˆÙ…', price_usd:1.50, language:'arabic', packages:[{label:'1k',mult:1},{label:'5k',mult:5},{label:'10k',mult:10}]},
  {id:'fb_en_1', platform:'facebook', title:'Ù„Ø§ÙŠÙƒØ§Øª ÙÙŠØ³Ø¨ÙˆÙƒ â€” Ø£Ø¬Ù†Ø¨ÙŠ', desc:'Ù„Ø§ÙŠÙƒØ§Øª Ø³Ø±ÙŠØ¹Ø© â€¢ Ø¬ÙˆØ¯Ø© Ø¬ÙŠØ¯Ø©', price_usd:0.31, language:'foreign', packages:[{label:'1k',mult:1},{label:'5k',mult:5}]},

  {id:'ig_ar_1', platform:'instagram', title:'ØªØµÙ…ÙŠÙ… Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¥Ù†Ø³ØªØºØ±Ø§Ù…', desc:'Ø­Ø²Ù…Ø© 10 Ù…Ù†Ø´ÙˆØ±Ø§Øª â€¢ PSD â€¢ ØªØ¹Ø¯ÙŠÙ„ 2 Ù…Ø±Ø©', price_usd:40, language:'arabic', packages:[{label:'Ø­Ø²Ù…Ø©',mult:1}]},
  {id:'ig_en_1', platform:'instagram', title:'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø¥Ù†Ø³ØªØºØ±Ø§Ù… â€” Ø£Ø¬Ù†Ø¨ÙŠ', desc:'Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© â€¢ Ø¨Ø¯Ø¡ Ø³Ø±ÙŠØ¹', price_usd:1.4, language:'foreign', packages:[{label:'1k',mult:1},{label:'5k',mult:5}]},

  {id:'tk_en_1', platform:'tiktok', title:'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ', desc:'Ø¬ÙˆØ¯Ø© Ù…Ù…ØªØ§Ø²Ø© â€¢ Ø¨Ø¯Ø¡ Ø³Ø±ÙŠØ¹', price_usd:1.2, language:'foreign', packages:[{label:'1k',mult:1},{label:'5k',mult:5}]},

  {id:'yt_en_1', platform:'youtube', title:'Ù…Ø´Ø§Ù‡Ø¯Ø§Øª ÙŠÙˆØªÙŠÙˆØ¨', desc:'Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© â€¢ Ù…Ø¯Ø© ÙƒØ§Ù…Ù„Ø©', price_usd:1.5, language:'foreign', packages:[{label:'1k',mult:1},{label:'10k',mult:10}]},

  {id:'tw_en_1', platform:'twitter', title:'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙˆÙŠØªØ± (X)', desc:'Ø²ÙŠØ§Ø¯Ø© Ù…ØªØ§Ø¨Ø¹Ø§Øª â€¢ Ù…ØªÙˆØ§ÙÙ‚', price_usd:1.1, language:'foreign', packages:[{label:'1k',mult:1}]},

  {id:'sc_en_1', platform:'snapchat', title:'Ø®Ø¯Ù…Ø© Ø³Ù†Ø§Ø¨ Ø´Ø§Øª', desc:'Ù…ØªØ§Ø¨Ø¹Ø§Øª ÙˆØªØ±ÙˆÙŠØ¬ Ø³Ù†Ø§Ø¨', price_usd:1.8, language:'foreign', packages:[{label:'1k',mult:1}]},

  {id:'tg_en_1', platform:'telegram', title:'Ø£Ø¹Ø¶Ø§Ø¡ Ù‚Ù†Ø§Ø© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…', desc:'Ø£Ø¹Ø¶Ø§Ø¡ Ù†Ø´Ø·ÙŠÙ† â€¢ Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©', price_usd:0.9, language:'foreign', packages:[{label:'1k',mult:1},{label:'5k',mult:5}]}
];

/* platforms order & display names */
const PLATFORM_ORDER = ['facebook','instagram','tiktok','youtube','twitter','snapchat','telegram'];
const PLATFORM_LABEL = {
  facebook:'ÙÙŠØ³Ø¨ÙˆÙƒ', instagram:'Ø¥Ù†Ø³ØªØºØ±Ø§Ù…', tiktok:'ØªÙŠÙƒ ØªÙˆÙƒ', youtube:'ÙŠÙˆØªÙŠÙˆØ¨',
  twitter:'ØªÙˆÙŠØªØ±', snapchat:'Ø³Ù†Ø§Ø¨ Ø´Ø§Øª', telegram:'ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…'
};

/* ==================== SVG ICONS (colored) ==================== */
function iconSVG(platform, size=20){
  const s = size;
  switch(platform){
    case 'facebook': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#1877F2"/><path d="M15.5 8.5H13.75C13.1111 8.5 12.75 8.86111 12.75 9.5V11H15.5L15 13.5H12.75V20H10V13.5H8.5V11H10V9C10 7.067 11.343 6 13.25 6H15.5V8.5Z" fill="white"/></svg>`;
    case 'instagram': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="igG" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#f58529"/><stop offset="0.5" stop-color="#dd2a7b"/><stop offset="1" stop-color="#515bd4"/></linearGradient></defs><rect width="24" height="24" rx="5" fill="url(#igG)"/><path d="M12 7.2A4.8 4.8 0 1 0 12 16.8 4.8 4.8 0 1 0 12 7.2Z" fill="white" opacity="0.95"/><circle cx="17.5" cy="6.5" r="1.2" fill="white"/></svg>`;
    case 'tiktok': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#0000"/><path d="M17.5 7.5v6.2a3.9 3.9 0 1 1-3.9-3.9h.7V7.5h3.2z" fill="#000"/><path d="M14.1 7.5V4.9h1.7c0 2.9 2.3 3.2 2.3 3.2v1.6c-1.6 0-2.7-.5-3.5-1.3-0.5-.5-0.6-0.9-0.6-1.9z" fill="#25F4EE"/><path d="M14.1 7.5V4.9h1.7c0 2.9 2.3 3.2 2.3 3.2v1.6c-1.6 0-2.7-.5-3.5-1.3-0.5-.5-0.6-0.9-0.6-1.9z" fill="#FF0050" opacity="0.6" transform="translate(0,0)"/></svg>`;
    case 'youtube': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#FF0000"/><path d="M9.5 8.5L15.5 12L9.5 15.5V8.5Z" fill="white"/></svg>`;
    case 'twitter': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#1DA1F2"/><path d="M17 8.2c-.4.2-.8.3-1.3.4.5-.3.8-.8.9-1.4-.5.3-1 .6-1.6.8-.5-.6-1.3-1-2.1-1C10.5 6 9.6 6.9 9.6 7.9c0 .2 0 .4.1.6C7.1 8.4 5 7.1 3.6 5.1c-.2.4-.3.9-.3 1.4 0 1 .5 1.9 1.2 2.4-.4 0-.8-.1-1.1-.3v.1c0 1.3.9 2.4 2.1 2.6-.2.1-.4.1-.6.1-.2 0-.4 0-.6-.1.4 1.3 1.6 2.2 3 2.2-1 0-1.9.1-2.9.1 1 1 2.3 1.6 3.7 1.6 4.5 0 6.9-3.8 6.9-7-.1-.3-.1-.6-.2-.9.5-.3.9-.8 1.2-1.3-.5.2-1 .4-1.6.5z" fill="white"/></svg>`;
    case 'snapchat': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#FFFC00"/><path d="M12 7c-2 0-2.5 1-2.5 1s.3 0 .8 0C11.1 8 12 8 12 8s.9 0 1.7 0c.5 0 .8 0 .8 0S14 7 12 7z" fill="#000"/><path d="M9.5 15.5c0 0 1-0.5 2.5-0.5s2.5.5 2.5.5V18h-5v-2.5z" fill="#000" opacity="0.9"/></svg>`;
    case 'telegram': return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="5" fill="#0088CC"/><path d="M6 12l10-5-3 9-2.5-2-1.5 1-3-3z" fill="white"/></svg>`;
    default: return `<svg width="${s}" height="${s}"></svg>`;
  }
}

/* ==================== UI BUILD & INTERACTIONS ==================== */
let activePlatform = 'facebook';
let activeLang = 'all';
let currentOrder = null;

/* helper to escape */
function esc(s){ return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* build category buttons */
function buildCategories(){
  const cats = Array.from(new Set(SERVICES.map(s=>s.platform)));
  const bar = document.getElementById('categoryBar');
  bar.innerHTML = '';
  for(const p of PLATFORM_ORDER){
    if(!cats.includes(p)) continue;
    const btn = document.createElement('button');
    btn.className = 'cat-btn' + (p===activePlatform ? ' active' : '');
    btn.innerHTML = `${iconSVGWrapper(p,20)} <span style="min-width:80px;text-align:left;display:inline-block">${PLATFORM_LABEL[p]||p}</span>`;
    btn.onclick = ()=>{
      activePlatform = p;
      document.querySelectorAll('.cat-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');
      renderServices();
    };
    bar.appendChild(btn);
  }
}

function iconSVGWrapper(platform, size){
  // wrap svg with glow effect
  return `<div style="display:inline-flex;align-items:center;justify-content:center;width:${size+8}px;height:${size+8}px;border-radius:8px;background:rgba(255,255,255,0.02);">${iconSVG(platform,size)}</div>`;
}

/* render services */
function renderServices(){
  const container = document.getElementById('servicesContainer');
  container.innerHTML = '';
  let list = SERVICES.filter(s=>s.platform===activePlatform);
  if(activeLang !== 'all') list = list.filter(s=>s.language===activeLang);
  if(list.length===0){
    container.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:24px;color:var(--muted)">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…</div>`;
    return;
  }
  for(const s of list){
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="left">
        <div class="icon-wrap">${iconSVG(s.platform,22)}</div>
        <div style="flex:1">
          <h3>${esc(s.title)}</h3>
          <div class="desc">${esc(s.desc)}</div>
          <div class="badges"><div class="badge">${s.language==='arabic'?'Ø¹Ø±Ø¨ÙŠ':'Ø£Ø¬Ù†Ø¨ÙŠ'}</div></div>
        </div>
      </div>
      <div class="actions">
        <div class="price">${Number(s.price_usd).toFixed(3)} $</div>
        <a class="btn btn-wa" href="javascript:void(0)" onclick="openOrder('${s.id}')">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
        <button class="btn-details" onclick="showDetails('${s.id}')">ØªÙØ§ØµÙŠÙ„</button>
      </div>
    `;
    // tilt handler
    if(EFFECTS.tilt){
      card.addEventListener('mousemove', e=>applyTilt(card, e));
      card.addEventListener('mouseleave', ()=>resetTilt(card));
    }
    // neon line on hover
    if(EFFECTS.neonLines){
      card.addEventListener('mouseenter', ()=>card.style.boxShadow='0 30px 70px rgba(58,88,255,0.12)');
      card.addEventListener('mouseleave', ()=>card.style.boxShadow='none');
    }
    container.appendChild(card);
  }
}

/* tilt */
function applyTilt(el, e){
  const rect = el.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  const dx = e.clientX - cx;
  const dy = e.clientY - cy;
  const rx = (-dy / rect.height) * 6; // rotateX
  const ry = (dx / rect.width) * 6;   // rotateY
  el.style.setProperty('--tiltX', rx + 'deg');
  el.style.setProperty('--tiltY', ry + 'deg');
}
function resetTilt(el){
  el.style.setProperty('--tiltX','0deg');
  el.style.setProperty('--tiltY','0deg');
}

/* set language */
function setLang(l){
  activeLang = l;
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('lg_'+(l==='all'?'all': l==='arabic'?'ar':'en')).classList.add('active');
  renderServices();
}

/* show details */
function showDetails(id){
  const s = SERVICES.find(x=>x.id===id);
  if(!s) return alert('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØ§ØµÙŠÙ„');
  alert(`${s.title}\n\n${s.desc}\n\nØ§Ù„Ø³Ø¹Ø±: ${s.price_usd} USD`);
}

/* ======= NEW modal functions (override previous modal behavior) ======= */

let currentPriceUSD = 0;
let currentServiceId = null;
let orderCounter = 90534;

function openOrder(serviceId){
  const s = SERVICES.find(x => x.id === serviceId);
  if(!s){
    alert('Ø®Ø·Ø£: Ø§Ù„Ø®Ø¯Ù…Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
    return;
  }
  currentPriceUSD = Number(s.price_usd) || 0;
  currentServiceId = serviceId;

  // Set modal title and description (uses your data)
  document.getElementById("modalTitle").textContent = s.title || 'Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©';
  document.getElementById("modalService").textContent = s.desc || s.platform || '';

  // Show platform icon if you want (you already have iconSVG function in your page)
  if(typeof iconSVG === 'function'){
    const iconHtml = iconSVG(s.platform, 28);
    document.getElementById("modalPlatformIcon").innerHTML = iconHtml;
    document.getElementById("modalPlatformIcon").classList.add('neon');
  }

  // Load saved fields (if any)
  document.getElementById('orderLinkAuto').value = localStorage.getItem('last_link') || '';
  document.getElementById('orderQty').value = localStorage.getItem('last_qty') || '';
  document.getElementById('paymentMethodAuto').value = localStorage.getItem('last_method') || 'syr';
  document.getElementById('transferCodeAuto').value = '';

  updateAutoPrice();

  // Show modal
  document.getElementById("orderModal").style.display = "flex";
  document.getElementById("orderModal").setAttribute('aria-hidden','false');
}

function closeOrder(){
  document.getElementById("orderModal").style.display = "none";
  document.getElementById("orderModal").setAttribute('aria-hidden','true');
  // remove neon on icon
  const ico = document.getElementById("modalPlatformIcon");
  if(ico) ico.classList.remove('neon');
}

function updateAutoPrice(){
  let qty = Number(document.getElementById("orderQty").value);
  if(!qty || qty < 100){
    document.getElementById("autoPriceBox").textContent = "0 USD";
    return;
  }
  let total = (qty / 1000) * currentPriceUSD;
  document.getElementById("autoPriceBox").textContent = Math.ceil(total) + " USD";
}

function confirmAndSend(){
  let link = document.getElementById("orderLinkAuto").value.trim();
  let qty = Number(document.getElementById("orderQty").value);
  let code = document.getElementById("transferCodeAuto").value.trim();
  let pay = document.getElementById("paymentMethodAuto").value;

  if(!link) return alert('ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨');
  if(!qty || qty<100) return alert('Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 100');
  if(!code) return alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„');

  // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø¨ÙˆÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
  localStorage.setItem('last_link', link);
  localStorage.setItem('last_qty', qty);
  localStorage.setItem('last_method', pay);

  let total = Math.ceil((qty/1000)*currentPriceUSD);
  let service = SERVICES.find(x=>x.id===currentServiceId);
  let id = orderCounter++;

  // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¥Ù† ÙˆÙØ¬Ø¯
  try{ document.getElementById("successSound").play(); }catch(e){/*ignore*/}

  let confirmHTML = `
    <h2 style="margin-top:0;margin-bottom:12px">âœ” ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ</h2>
    <div class="status-box">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
    <div style="text-align:right;line-height:1.9;margin-top:12px;font-size:15px">
      <b>Ø§Ù„Ù…Ø¹Ø±Ù:</b> ${id}<br>
      <b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${service.title}<br>
      <b>Ø§Ù„Ø±Ø§Ø¨Ø·:</b> ${link}<br>
      <b>Ø§Ù„ÙƒÙ…ÙŠØ©:</b> ${qty}<br>
      <b>Ø§Ù„ØªÙƒÙ„ÙØ©:</b> ${total} USD
    </div>
    <button onclick="sendWA(${id}, '${escapeQuotes(link)}', ${qty}, ${total}, '${escapeQuotes(service.title)}', '${pay}', '${escapeQuotes(code)}')"
      style="margin-top:18px;padding:12px 20px;border:none;border-radius:10px;background:#25D366;color:#032;font-size:16px;cursor:pointer;width:100%">Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>
  `;

  document.getElementById("confirmCard").innerHTML = confirmHTML;
  document.getElementById("confirmBox").style.display = 'flex';
  document.getElementById("confirmBox").setAttribute('aria-hidden','false');
}

/* helper to escape "'" and line breaks in strings inserted into onclick */
function escapeQuotes(str){
  if(!str) return '';
  return String(str).replace(/'/g,"\\'").replace(/\n/g,' ');
}

function sendWA(id, link, qty, total, title, pay, code){
  let paymentInfo = pay === "syr"
    ? "Ø³ÙŠØ±ÙŠØªÙ„ ÙƒØ§Ø´: 0980962294"
    : "Ø´Ø§Ù… ÙƒØ§Ø´: bc6cc5f8ce57b34373d251b964853432";

  let msg = `ğŸ“ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯*\n\n`+
            `ğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${id}\n`+
            `ğŸ”§ Ø§Ù„Ø®Ø¯Ù…Ø©: ${title}\n`+
            `ğŸ”¢ Ø§Ù„ÙƒÙ…ÙŠØ©: ${qty}\n`+
            `ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ©: ${total} USD\n`+
            `ğŸ“ Ø§Ù„Ø±Ø§Ø¨Ø·: ${link}\n`+
            `ğŸ”‘ ÙƒÙˆØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„: ${code}\n`+
            `ğŸ’³ Ø§Ù„Ø¯ÙØ¹: ${paymentInfo}`;

  window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank', 'noopener');

  // close overlays
  document.getElementById("confirmBox").style.display = 'none';
  document.getElementById("orderModal").style.display = 'none';
}

/* close confirm overlay on click outside or ESC */
document.addEventListener('click', (e)=>{
  const box = document.getElementById('confirmBox');
  if(box.style.display === 'flex' && e.target === box){
    box.style.display = 'none';
  }
});
document.addEventListener('keydown', e=>{
  if(e.key === 'Escape'){
    if(document.getElementById('confirmBox').style.display === 'flex'){
      document.getElementById('confirmBox').style.display = 'none';
    } else {
      closeOrder();
    }
  }
});

/* ==================== Skeleton loading simulation (fast) ==================== */
function showSkeletonThenLoad(){
  document.getElementById('skeletonArea').style.display = 'grid';
  document.getElementById('servicesContainer').style.display = 'none';
  setTimeout(()=>{
    document.getElementById('skeletonArea').style.display = 'none';
    document.getElementById('servicesContainer').style.display = 'grid';
    buildCategories();
    renderServices();
  }, 700);
}

/* ==================== Theme Toggle (Dark <-> Light) ==================== */
let currentTheme = 'dark';
const themeToggleBtn = document.getElementById('themeToggle');
function applyTheme(t){
  if(t === 'light'){
    document.documentElement.style.setProperty('--bg','#f6f8fb');
    document.documentElement.style.setProperty('--panel','#ffffff');
    document.documentElement.style.setProperty('--muted','#556677');
    document.documentElement.style.setProperty('--text','#071122');
    themeToggleBtn.innerText = 'ğŸŒ™';
  }else{
    document.documentElement.style.setProperty('--bg','#05050b');
    document.documentElement.style.setProperty('--panel','#0b1220');
    document.documentElement.style.setProperty('--muted','#98a6bf');
    document.documentElement.style.setProperty('--text','#eaf3ff');
    themeToggleBtn.innerText = 'â˜€ï¸';
  }
  currentTheme = t;
}
themeToggleBtn.addEventListener('click', ()=>applyTheme(currentTheme==='dark' ? 'light' : 'dark'));

/* ==================== Cursor follow glow ==================== */
const cursorEl = document.getElementById('cursorFollow');
if(EFFECTS.cursorGlow){
  document.addEventListener('mousemove', (e)=>{
    cursorEl.style.left = e.clientX + 'px';
    cursorEl.style.top = e.clientY + 'px';
    cursorEl.style.width = '24px'; cursorEl.style.height = '24px';
  });
  document.addEventListener('mousedown', ()=>{ cursorEl.style.transform = 'translate(-50%,-50%) scale(.8)'; });
  document.addEventListener('mouseup', ()=>{ cursorEl.style.transform = 'translate(-50%,-50%) scale(1)'; });
} else cursorEl.style.display = 'none';

/* ==================== Particles (light, parallax feel) ==================== */
(function ParticleSystem(){
  if(!EFFECTS.particles) return;
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = window.innerWidth;
  let h = canvas.height = window.innerHeight;
  const particles = [];
  const COUNT = Math.max(30, Math.floor(w/60));
  for(let i=0;i<COUNT;i++){
    particles.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: 0.6 + Math.random()*1.6,
      vx: (Math.random()*0.6)-0.3,
      vy: (Math.random()*0.2)+0.05,
      a: 0.05 + Math.random()*0.2
    });
  }
  window.addEventListener('resize', ()=>{ w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; });

  let t=0;
  function loop(){
    ctx.clearRect(0,0,w,h);
    for(const p of particles){
      p.x += p.vx + Math.sin((t+p.x)/200)*0.2;
      p.y += p.vy;
      if(p.y > h + 5){ p.y = -10; p.x = Math.random()*w; }
      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${p.a})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();
    }
    t++;
    requestAnimationFrame(loop);
  }
  loop();
})();

/* ==================== Snow Sparkles (lighter, sparkly) ==================== */
(function SnowSparkles(){
  if(!EFFECTS.snow) return;
  const canvas = document.getElementById('snowCanvas');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = window.innerWidth;
  let h = canvas.height = window.innerHeight;
  const flakes = [];
  const COUNT = Math.max(40, Math.floor(w/40));
  for(let i=0;i<COUNT;i++){
    flakes.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: Math.random()*1.6+0.6,
      vy: 0.15 + Math.random()*0.5,
      vx: (Math.random()*0.4)-0.2,
      alpha: 0.35 + Math.random()*0.5
    });
  }
  window.addEventListener('resize', ()=>{ w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; });

  function draw(){
    ctx.clearRect(0,0,w,h);
    for(const f of flakes){
      f.x += f.vx + Math.sin(f.y/80)*0.1;
      f.y += f.vy;
      if(f.y > h + 5){ f.y = -10; f.x = Math.random()*w; }
      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${f.alpha})`;
      ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
      ctx.fill();
      if(Math.random() > 0.997){
        ctx.beginPath();
        ctx.fillStyle = 'rgba(255,255,255,0.9)';
        ctx.arc(f.x + (Math.random()*6-3), f.y + (Math.random()*6-3), f.r*0.8, 0, Math.PI*2);
        ctx.fill();
      }
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ==================== Header dynamic blur on scroll ==================== */
const header = document.getElementById('siteHeader');
let lastScroll = 0;
window.addEventListener('scroll', ()=>{
  const s = window.scrollY;
  if(s > 30) header.classList.add('scrolled'); else header.classList.remove('scrolled');
  lastScroll = s;
});

/* ==================== Init UI with skeleton => load ==================== */
showSkeletonThenLoad();

/* Optional: close modal on ESC */
document.addEventListener('keydown', e=>{ if(e.key==='Escape') {
  if(document.getElementById('confirmBox').style.display === 'flex') document.getElementById('confirmBox').style.display = 'none';
  else closeOrder();
}});

</script>
</body>
</html>
